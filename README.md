# Image-Block-Compression-and-Restoration

### Explanation for the Two Codes

These two Python scripts are designed to work together for processing, optimizing, and restoring images. They are prepared for **Google Colab** and structured to perform in sequence, where **Code 1** must be executed first, followed by **Code 2**.

---

### **Code 1: Image Processing and Optimization**

#### **Purpose:**
This code analyzes an input image, divides it into small blocks, and identifies blocks that are considered "removable" based on texture and structural characteristics. The output includes:
1. A **mask** image that highlights removable blocks.
2. A **modified image** where removable blocks are replaced with white pixels.

#### **Workflow:**
1. **Input Image Loading**:
   - Reads the input image from the specified path.
   - Converts the image to RGB for processing.

2. **Block Analysis**:
   - Divides the image into 8x8 pixel blocks.
   - Detects edges using the Canny edge detection algorithm.
   - Classifies blocks as "structural" or "textural" based on the presence of edges.

3. **Identifying Removable Blocks**:
   - Blocks with low variance and minimal gradient magnitude are considered removable.
   - Such blocks are marked for removal.

4. **Output Generation**:
   - Creates a **mask** image marking removable blocks.
   - Generates a **modified image** where removable blocks are replaced with white pixels.
   - Saves both the mask and the modified image.

5. **File Size Comparison**:
   - Compares the size of the modified image with the original image to evaluate optimization.

#### **Outputs:**
- `mask.png`: A grayscale image highlighting the removable blocks.
- `modified_image.jpg`: The modified version of the original image with removed blocks.

#### **Run Environment**:
Execute this code in Google Colab, ensuring the input image is uploaded in the `/content/` directory or adjust the path accordingly.

---

### **Code 2: Image Restoration**

#### **Purpose:**
This code restores the modified image created by **Code 1** using inpainting techniques, filling the white regions marked in the mask. It generates a final restored image.

#### **Workflow:**
1. **Input File Loading**:
   - Reads the `mask.png` and `modified_image.jpg` generated by **Code 1**.
   - Verifies the existence and validity of these files.

2. **Restoration Process**:
   - Uses the inpainting algorithm (`cv2.inpaint`) to fill the regions marked in the mask.
   - The restoration is performed with a radius and method that ensure smooth filling.

3. **Visualization**:
   - Displays the modified image, the mask, and the restored image side by side for comparison.

4. **Output Generation**:
   - Saves the final restored image as `restored_image.jpg`.
   - Compares the file size of the restored image with the combined sizes of the modified image and mask.

#### **Outputs:**
- `restored_image.jpg`: The final restored version of the original image.

#### **Run Environment**:
This code is also designed for Google Colab and assumes that the output files from **Code 1** (`mask.png` and `modified_image.jpg`) are present in the same working directory.

---

### **Relation Between the Two Codes:**
1. **Code 1** must be executed first as it generates the necessary input files (`mask.png` and `modified_image.jpg`) for **Code 2**.
2. **Code 2** relies on the outputs of **Code 1** to perform the restoration process.

---

### **Example Workflow in Google Colab**:
1. Upload the input image (`11.jpg`) to the Colab environment.
2. Run **Code 1** to generate `mask.png` and `modified_image.jpg`.
3. Run **Code 2** to restore the image and generate `restored_image.jpg`.

